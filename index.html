<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>The Media Archive</title>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;1,300;1,400&family=Montserrat:wght@300;400&display=swap" rel="stylesheet"/>
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    body { background: #eeeeeb; color: #1a1a1a; font-family: "Montserrat", sans-serif; font-weight: 300; min-height: 100vh; }

    nav { display: flex; justify-content: space-between; align-items: center; padding: 28px 60px; }
    .logo { font-family: "Montserrat", sans-serif; font-weight: 400; font-size: 13px; letter-spacing: 0.2em; text-transform: uppercase; cursor: pointer; }
    .nav-links { display: flex; gap: 40px; list-style: none; }
    .nav-links a { font-size: 11px; letter-spacing: 0.2em; text-transform: uppercase; text-decoration: none; color: #1a1a1a; cursor: pointer; }
    .nav-links a:hover { opacity: 0.5; }
    .nav-links a.active { border-bottom: 1px solid #1a1a1a; padding-bottom: 2px; }

    .page { display: none; }
    .page.active { display: block; }

    .hero { text-align: center; padding: 80px 60px 100px; }
    .hero h1 { font-family: "Cormorant Garamond", serif; font-weight: 300; font-size: clamp(48px, 8vw, 96px); letter-spacing: 0.25em; text-transform: uppercase; color: #1a1a1a; line-height: 1; }
    .hero p { margin-top: 18px; font-size: 10px; letter-spacing: 0.3em; text-transform: uppercase; color: #777; }

    .controls { max-width: 1100px; margin: 0 auto; padding: 0 60px 20px; display: flex; align-items: center; gap: 40px; border-bottom: 1px solid #c8c8c8; }
    .search-wrap { display: flex; align-items: center; gap: 12px; flex: 1; }
    .search-wrap svg { color: #888; flex-shrink: 0; }
    .search-wrap input { border: none; background: transparent; font-family: "Montserrat", sans-serif; font-weight: 300; font-size: 11px; letter-spacing: 0.15em; color: #666; outline: none; width: 100%; }
    .search-wrap input::placeholder { color: #999; text-transform: uppercase; }
    .filter-group { display: flex; align-items: center; gap: 30px; }
    .filter { display: flex; flex-direction: column; align-items: flex-start; gap: 4px; }
    .filter label { font-size: 9px; letter-spacing: 0.25em; text-transform: uppercase; color: #888; }
    .filter-row { display: flex; align-items: center; gap: 8px; }
    .filter select { border: none; background: transparent; font-family: "Montserrat", sans-serif; font-size: 11px; letter-spacing: 0.15em; color: #1a1a1a; outline: none; cursor: pointer; appearance: none; -webkit-appearance: none; }
    .filter-row svg { color: #888; }

    .entries { max-width: 1100px; margin: 0 auto; padding: 0 60px; border-top: 1.5px solid #a8a8a4; }
    .entry { display: flex; justify-content: space-between; align-items: flex-start; padding: 60px 0; border-bottom: 1.5px solid #a8a8a4; }
    .entry-left { flex: 1; }
    .entry-meta { display: flex; align-items: center; gap: 20px; margin-bottom: 20px; }
    .entry-num { font-size: 10px; letter-spacing: 0.1em; color: #6b6b68; }
    .entry-dash { width: 30px; height: 1px; background: #8a8a86; }
    .entry-tag { font-size: 9px; letter-spacing: 0.25em; text-transform: uppercase; color: #6b6b68; }
    .entry-title { font-family: "Cormorant Garamond", serif; font-weight: 500; font-size: 32px; color: #2e2e2b; margin-bottom: 10px; cursor: pointer; display: inline-block; border-bottom: 1px solid transparent; transition: border-color 0.2s; line-height: 1.2; }
    .entry-title:hover { border-color: #2e2e2b; }
    .entry p { font-size: 12px; color: #666; line-height: 1.6; max-width: 680px; margin-top: 8px; }
    .entry-actions { display: flex; flex-direction: column; gap: 10px; padding-top: 10px; min-width: 100px; }
    .action-btn { display: flex; align-items: center; gap: 8px; font-size: 9px; letter-spacing: 0.2em; text-transform: uppercase; color: #888; cursor: pointer; text-decoration: none; background: none; border: none; font-family: inherit; }
    .action-btn:hover { color: #333; }

    .essay-nav { max-width: 740px; margin: 0 auto; padding: 50px 60px 0; }
    .back-btn { display: inline-flex; align-items: center; gap: 10px; font-size: 9px; letter-spacing: 0.25em; text-transform: uppercase; color: #888; cursor: pointer; background: none; border: none; font-family: inherit; padding: 0; }
    .back-btn:hover { color: #1a1a1a; }
    .essay-body { max-width: 740px; margin: 0 auto; padding: 60px 60px 100px; }
    .essay-meta { display: flex; align-items: center; gap: 20px; margin-bottom: 40px; }
    .essay-num { font-size: 10px; letter-spacing: 0.1em; color: #6b6b68; }
    .essay-dash { width: 30px; height: 1px; background: #8a8a86; }
    .essay-tag { font-size: 9px; letter-spacing: 0.25em; text-transform: uppercase; color: #6b6b68; }
    .essay-body h1 { font-family: "Cormorant Garamond", serif; font-weight: 400; font-size: clamp(32px, 4vw, 52px); color: #2e2e2b; line-height: 1.15; margin-bottom: 16px; }
    .essay-subtitle { font-size: 12px; color: #888; line-height: 1.6; margin-bottom: 50px; max-width: 560px; }
    .essay-divider { border: none; border-top: 1px solid #c8c8c8; margin-bottom: 50px; }
    .essay-text { font-family: "Cormorant Garamond", serif; font-weight: 300; font-size: 19px; line-height: 1.9; color: #2a2a2a; }
    .essay-text p { margin-bottom: 1.6em; }
    .essay-text p:last-child { margin-bottom: 0; }
    .essay-actions { display: flex; gap: 30px; margin-top: 60px; padding-top: 40px; border-top: 1px solid #c8c8c8; }

    .contact-hero { text-align: center; padding: 80px 60px 60px; }
    .contact-hero h1 { font-family: "Cormorant Garamond", serif; font-weight: 300; font-size: clamp(40px, 6vw, 72px); letter-spacing: 0.25em; text-transform: uppercase; color: #1a1a1a; line-height: 1; }
    .contact-hero p { margin-top: 18px; font-size: 10px; letter-spacing: 0.3em; text-transform: uppercase; color: #777; }
    .contact-body { max-width: 860px; margin: 0 auto; padding: 0 60px 80px; }
    .contact-divider { border: none; border-top: 1px solid #c8c8c8; margin-bottom: 60px; }
    .section-label { font-size: 9px; letter-spacing: 0.3em; text-transform: uppercase; color: #888; margin-bottom: 20px; }
    .bio-block { margin-bottom: 60px; }
    .bio-block p { font-family: "Cormorant Garamond", serif; font-weight: 300; font-size: 20px; line-height: 1.85; color: #333; max-width: 640px; }
    .email-block { margin-bottom: 60px; border-top: 1px solid #c8c8c8; padding-top: 40px; }
    .email-block a { font-family: "Cormorant Garamond", serif; font-size: 22px; font-weight: 400; letter-spacing: 0.05em; color: #1a1a1a; text-decoration: none; border-bottom: 1px solid #bbb; padding-bottom: 2px; }
    .email-block a:hover { border-color: #1a1a1a; }
    .form-block { border-top: 1px solid #c8c8c8; padding-top: 40px; }
    .form-row { display: flex; gap: 30px; margin-bottom: 30px; }
    .form-field { display: flex; flex-direction: column; gap: 8px; flex: 1; }
    .form-field label { font-size: 9px; letter-spacing: 0.25em; text-transform: uppercase; color: #888; }
    .form-field input, .form-field textarea { background: transparent; border: none; border-bottom: 1px solid #c8c8c8; padding: 8px 0; font-family: "Montserrat", sans-serif; font-weight: 300; font-size: 12px; color: #1a1a1a; outline: none; width: 100%; resize: none; transition: border-color 0.2s; }
    .form-field input:focus, .form-field textarea:focus { border-color: #666; }
    .form-field textarea { min-height: 110px; }
    .form-submit { margin-top: 40px; }
    .form-submit button { background: none; border: 1px solid #1a1a1a; padding: 12px 36px; font-family: "Montserrat", sans-serif; font-weight: 300; font-size: 9px; letter-spacing: 0.3em; text-transform: uppercase; color: #1a1a1a; cursor: pointer; transition: background 0.2s, color 0.2s; }
    .form-submit button:hover { background: #1a1a1a; color: #eeeeeb; }

    footer { text-align: center; padding: 40px 60px 60px; font-size: 9px; letter-spacing: 0.3em; text-transform: uppercase; color: #888; }
    #loading { text-align: center; padding: 60px; font-size: 10px; letter-spacing: 0.2em; color: #aaa; text-transform: uppercase; }
  </style>
</head>
<body>

  <nav>
    <div class="logo" onclick="showPage('archive')">Foundations</div>
    <ul class="nav-links">
      <li><a id="nav-archive" class="active" onclick="showPage('archive')">Archive</a></li>
      <li><a id="nav-contact" onclick="showPage('contact')">Contact</a></li>
    </ul>
  </nav>

  <!-- ARCHIVE -->
  <div id="page-archive" class="page active">
    <section class="hero">
      <h1>The Media Archive</h1>
      <p>Architectures of Communication</p>
    </section>
    <div class="controls">
      <div class="search-wrap">
        <svg width="14" height="14" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
        <input type="text" id="search-input" placeholder="Search Index..." oninput="filterEntries()"/>
      </div>
      <div class="filter-group">
        <div class="filter">
          <label>Topic</label>
          <div class="filter-row">
            <select id="filter-topic" onchange="filterEntries()">
              <option>ALL</option>
              <option>Communication Theory</option>
              <option>Media Ecologies</option>
              <option>Cultural Studies</option>
              <option>Media &amp; Islam</option>
            </select>
            <svg width="10" height="10" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><polyline points="6 9 12 15 18 9"/></svg>
          </div>
        </div>
        <div class="filter">
          <label>Structure</label>
          <div class="filter-row">
            <select id="filter-structure" onchange="filterEntries()">
              <option>ALL</option>
              <option>Opinion Essay</option>
              <option>Notes</option>
            </select>
            <svg width="10" height="10" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><polyline points="6 9 12 15 18 9"/></svg>
          </div>
        </div>
      </div>
    </div>
    <div class="entries" id="entries-list">
      <div id="loading">Loading essays...</div>
    </div>
    <footer>A Personal Repository &middot; One-Woman Show &middot; MMXXVI</footer>
  </div>

  <!-- ESSAY VIEW -->
  <div id="page-essay" class="page">
    <div class="essay-nav">
      <button class="back-btn" onclick="showPage('archive')">
        <svg width="14" height="14" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></svg>
        Back to Archive
      </button>
    </div>
    <div class="essay-body" id="essay-content"></div>
    <footer>A Personal Repository &middot; One-Woman Show &middot; MMXXVI</footer>
  </div>

  <!-- CONTACT -->
  <div id="page-contact" class="page">
    <section class="contact-hero">
      <h1>Contact</h1>
      <p>Get in touch</p>
    </section>
    <div class="contact-body">
      <hr class="contact-divider"/>
      <div class="bio-block">
        <div class="section-label">About</div>
        <p>This archive is a personal repository of essays and notes on media, culture, and communication. It is a one-woman endeavor â€” written, recorded, and assembled as an ongoing inquiry into the architectures that shape how we speak, listen, and understand.</p>
      </div>
      <div class="email-block">
        <div class="section-label">Email</div>
        <a href="mailto:hello@example.com">hello@example.com</a>
      </div>
      <div class="form-block">
        <div class="section-label">Send a Message</div>
        <div class="form-row">
          <div class="form-field"><label>Name</label><input type="text" placeholder="Your name"/></div>
          <div class="form-field"><label>Email</label><input type="email" placeholder="your@email.com"/></div>
        </div>
        <div class="form-field"><label>Message</label><textarea placeholder="Write your message here..."></textarea></div>
        <div class="form-submit"><button type="button">Send</button></div>
      </div>
    </div>
    <footer>A Personal Repository &middot; One-Woman Show &middot; MMXXVI</footer>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script>
    var allEssays = [];

    // Fetch and parse all essay markdown files
    var essayFiles = [
      "essays/structural-transformation.md",
      "essays/cultural-forms.md",
      "essays/ethics-media-landscape.md",
      "essays/media-extension-infrastructure.md"
    ];

    function parseFrontmatter(text) {
      var match = text.match(/^---\n([\s\S]*?)\n---\n([\s\S]*)$/);
      if (!match) return { meta: {}, body: text };
      var meta = {};
      match[1].split("\n").forEach(function(line) {
        var parts = line.match(/^(\w+(?:_\w+)*):\s*"?([^"]*)"?$/);
        if (parts) meta[parts[1]] = parts[2].trim();
      });
      return { meta: meta, body: match[2].trim() };
    }

    function loadEssays() {
      var promises = essayFiles.map(function(file) {
        return fetch(file).then(function(r) { return r.text(); }).then(function(text) {
          var parsed = parseFrontmatter(text);
          return { file: file, meta: parsed.meta, body: parsed.body };
        });
      });
      Promise.all(promises).then(function(essays) {
        allEssays = essays;
        renderEntries(essays);
      });
    }

    function renderEntries(essays) {
      var list = document.getElementById("entries-list");
      if (essays.length === 0) {
        list.innerHTML = "<div id=\"loading\">No essays found.</div>";
        return;
      }
      list.innerHTML = essays.map(function(essay, i) {
        return "<div class=\"entry\">" +
          "<div class=\"entry-left\">" +
            "<div class=\"entry-meta\">" +
              "<span class=\"entry-num\">" + String(i + 1).padStart(2, "0") + "</span>" +
              "<div class=\"entry-dash\"></div>" +
              "<span class=\"entry-tag\">" + (essay.meta.topic || "") + "</span>" +
            "</div>" +
            "<div class=\"entry-title\" onclick=\"openEssay(" + i + ")\">" + (essay.meta.title || "") + "</div>" +
            "<p>" + (essay.meta.subtitle || "") + "</p>" +
          "</div>" +
          "<div class=\"entry-actions\">" +
            (essay.meta.listen_url ? "<a class=\"action-btn\" href=\"" + essay.meta.listen_url + "\"><svg width=\"12\" height=\"12\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\"><polygon points=\"11 5 6 9 2 9 2 15 6 15 11 19 11 5\"/><path d=\"M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07\"/></svg>Listen</a>" : "<span class=\"action-btn\" style=\"opacity:0.3\"><svg width=\"12\" height=\"12\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\"><polygon points=\"11 5 6 9 2 9 2 15 6 15 11 19 11 5\"/><path d=\"M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07\"/></svg>Listen</span>") +
            (essay.meta.pdf_url ? "<a class=\"action-btn\" href=\"" + essay.meta.pdf_url + "\"><svg width=\"12\" height=\"12\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\"><path d=\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\"/><polyline points=\"14 2 14 8 20 8\"/></svg>PDF</a>" : "<span class=\"action-btn\" style=\"opacity:0.3\"><svg width=\"12\" height=\"12\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\"><path d=\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\"/><polyline points=\"14 2 14 8 20 8\"/></svg>PDF</span>") +
            (essay.meta.mp3_url ? "<a class=\"action-btn\" href=\"" + essay.meta.mp3_url + "\"><svg width=\"12\" height=\"12\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\"><path d=\"M9 18V5l12-2v13\"/><circle cx=\"6\" cy=\"18\" r=\"3\"/><circle cx=\"18\" cy=\"16\" r=\"3\"/></svg>MP3 File</a>" : "<span class=\"action-btn\" style=\"opacity:0.3\"><svg width=\"12\" height=\"12\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\"><path d=\"M9 18V5l12-2v13\"/><circle cx=\"6\" cy=\"18\" r=\"3\"/><circle cx=\"18\" cy=\"16\" r=\"3\"/></svg>MP3 File</span>") +
          "</div>" +
        "</div>";
      }).join("");
    }

    function filterEntries() {
      var search = document.getElementById("search-input").value.toLowerCase();
      var topic = document.getElementById("filter-topic").value;
      var structure = document.getElementById("filter-structure").value;
      var filtered = allEssays.filter(function(e) {
        var matchSearch = !search || (e.meta.title || "").toLowerCase().includes(search) || (e.meta.subtitle || "").toLowerCase().includes(search);
        var matchTopic = topic === "ALL" || e.meta.topic === topic;
        var matchStructure = structure === "ALL" || e.meta.structure === structure;
        return matchSearch && matchTopic && matchStructure;
      });
      renderEntries(filtered);
    }

    function openEssay(index) {
      var essay = allEssays[index];
      var html = "<div class=\"essay-meta\">" +
        "<span class=\"essay-num\">" + String(index + 1).padStart(2, "0") + "</span>" +
        "<div class=\"essay-dash\"></div>" +
        "<span class=\"essay-tag\">" + (essay.meta.topic || "") + "</span>" +
        "</div>" +
        "<h1>" + (essay.meta.title || "") + "</h1>" +
        "<p class=\"essay-subtitle\">" + (essay.meta.subtitle || "") + "</p>" +
        "<hr class=\"essay-divider\"/>" +
        "<div class=\"essay-text\">" + marked.parse(essay.body) + "</div>" +
        "<div class=\"essay-actions\">" +
          (essay.meta.listen_url ? "<a class=\"action-btn\" href=\"" + essay.meta.listen_url + "\">Listen</a>" : "") +
          (essay.meta.pdf_url ? "<a class=\"action-btn\" href=\"" + essay.meta.pdf_url + "\">PDF</a>" : "") +
          (essay.meta.mp3_url ? "<a class=\"action-btn\" href=\"" + essay.meta.mp3_url + "\">MP3 File</a>" : "") +
        "</div>";
      document.getElementById("essay-content").innerHTML = html;
      showPage("essay");
    }

    function showPage(page) {
      document.querySelectorAll(".page").forEach(function(p) { p.classList.remove("active"); });
      document.querySelectorAll(".nav-links a").forEach(function(a) { a.classList.remove("active"); });
      document.getElementById("page-" + page).classList.add("active");
      var navEl = document.getElementById("nav-" + page);
      if (navEl) navEl.classList.add("active");
      window.scrollTo(0, 0);
    }

    loadEssays();
  </script>
</body>
</html>